<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassicParts - Prot√≥tipo MVP</title>
    <!-- Font Awesome para √≠cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos CSS Completos */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .phone-container {
            width: 375px;
            height: 812px;
            background: white;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            font-size: 14px;
            background: #f8f8f8;
            border-bottom: 1px solid #eee;
        }
        
        .header {
            padding: 15px 20px;
            background: #2c3e50;
            color: white;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-btn {
            background: none;
            border: none;
            color: rgba(255,255,255,0.7);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .nav-btn.active {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: none;
        }
        
        .content.active {
            display: block;
        }
        
        .search-bar {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        #parts-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .card {
            border: 1px solid #eee;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }
        
        .card-image {
            height: 180px;
            background: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
        }
        
        .card-content {
            padding: 15px;
        }
        
        .card-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .card-subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .card-price {
            font-weight: bold;
            color: #e74c3c;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .card-location {
            color: #3498db;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Formul√°rio de Venda */
        .form-screen {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }
        
        textarea.form-input {
            resize: vertical;
        }
        
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 10px;
        }
        
        .upload-text {
            color: #666;
        }
        
        #preview-container {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .btn-primary {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            width: 100%;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary:hover {
            background: #1a252f;
        }
        
        /* Tela de Chat */
        .chat-screen {
            display: none;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-screen.active {
            display: flex;
        }
        
        .chat-header {
            padding: 15px;
            background: #2c3e50;
            color: white;
            text-align: center;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: #f5f5f5;
        }
        
        .message {
            display: flex;
            max-width: 80%;
        }
        
        .message.sent {
            align-self: flex-end;
        }
        
        .message.received {
            align-self: flex-start;
        }
        
        .message-bubble {
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
        }
        
        .sent .message-bubble {
            background: #3498db;
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .received .message-bubble {
            background: white;
            border: 1px solid #ddd;
            border-bottom-left-radius: 5px;
        }
        
        .chat-input {
            display: flex;
            padding: 10px;
            background: white;
            border-top: 1px solid #eee;
        }
        
        #chat-input-field {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            margin-right: 10px;
        }
        
        .send-btn {
            background: #2c3e50;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            background: white;
            border-top: 1px solid #eee;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 10px;
            color: #666;
        }
        
        .nav-item.active {
            color: #2c3e50;
        }
        
        .nav-icon {
            font-size: 20px;
        }
        
        .nav-label {
            font-size: 12px;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 100;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 200;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 10px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        
        .reset-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            margin-top: 15px;
            cursor: pointer;
        }
        
        /* Tela de Perfil */
        .profile-screen {
            padding: 20px;
            display: none;
        }
        
        .profile-screen.active {
            display: block;
        }
        
        .profile-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            margin: 0 auto 15px;
        }
        
        .profile-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .profile-location {
            color: #666;
            margin-bottom: 20px;
        }
        
        .profile-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
        }
        
        .profile-section-title {
            font-size: 16px;
            font-weight: bold;
            margin: 20px 0 10px;
            color: #2c3e50;
        }
        
        .my-parts-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .my-part-item {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            gap: 15px;
        }
        
        .my-part-image {
            width: 80px;
            height: 80px;
            background: #f0f0f0;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
        }
        
        .my-part-info {
            flex: 1;
        }
        
        .my-part-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .my-part-price {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .my-part-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .action-btn {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .edit-btn {
            background: #3498db;
            color: white;
            border: none;
        }
        
        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="status-bar">
            <span>9:41</span>
            <span>üîã 100%</span>
        </div>
        
        <div class="header">
            <div class="logo">üîß ClassicParts</div>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showScreen('home', this)">In√≠cio</button>
                <button class="nav-btn" onclick="showScreen('sell', this)">Vender</button>
                <button class="nav-btn" onclick="showScreen('chat', this)">Chat</button>
            </div>
        </div>
        
        <!-- Tela Principal -->
        <div id="home-screen" class="content active">
            <input type="text" class="search-bar" placeholder="Buscar pe√ßas (ex: Fusca carburador)" oninput="searchParts()">
            <div id="parts-container">
                <!-- Parts will be loaded dynamically -->
            </div>
        </div>
        
        <!-- Tela de Vender -->
        <div id="sell-screen" class="content form-screen">
            <h2 style="margin-bottom: 20px; color: #2c3e50;">Anunciar Pe√ßa</h2>
            
            <form id="sell-form" onsubmit="event.preventDefault(); addPart();">
                <div class="form-group">
                    <label class="form-label">Fotos da Pe√ßa *</label>
                    <input type="file" id="part-images" accept="image/*" multiple style="display: none;">
                    <div class="upload-area" onclick="document.getElementById('part-images').click()">
                        <div class="upload-text">
                            <i class="fas fa-camera" style="font-size: 24px; margin-bottom: 8px;"></i><br>
                            Adicionar fotos (m√°x. 3)
                        </div>
                    </div>
                    <div id="preview-container"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">T√≠tulo do An√∫ncio *</label>
                    <input type="text" name="title" class="form-input" placeholder="Ex: Carburador Fusca 1300 Original" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Marca *</label>
                    <input type="text" name="brand" class="form-input" placeholder="Ex: Volkswagen" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Modelo *</label>
                    <input type="text" name="model" class="form-input" placeholder="Ex: Fusca" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ano *</label>
                    <input type="text" name="year" class="form-input" placeholder="Ex: 1970-1975" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Pre√ßo (R$) *</label>
                    <input type="number" name="price" class="form-input" placeholder="280" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea name="description" class="form-input" rows="3" placeholder="Descreva o estado da pe√ßa, compatibilidade, etc."></textarea>
                </div>
                
                <button type="submit" class="btn-primary"><i class="fas fa-bullhorn"></i> Publicar An√∫ncio</button>
            </form>
        </div>
        
        <!-- Tela de Chat -->
        <div id="chat-screen" class="chat-screen">
            <div class="chat-header">
                <strong>üí¨ Jo√£o Silva</strong><br>
                <small>Carburador Fusca 1300</small>
            </div>
            
            <div class="chat-messages">
                <!-- Mensagens ser√£o carregadas dinamicamente -->
            </div>
            
            <div class="chat-input">
                <input type="text" placeholder="Digite sua mensagem..." id="chat-input-field">
                <button class="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        
        <!-- Tela de Perfil -->
        <div id="profile-screen" class="content profile-screen">
            <div class="profile-header">
                <div class="profile-avatar">V</div>
                <div class="profile-name">Voc√™</div>
                <div class="profile-location">üìç S√£o Jos√©, SC</div>
            </div>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-value">12</div>
                    <div class="stat-label">An√∫ncios</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">24</div>
                    <div class="stat-label">Vendidos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">4.8</div>
                    <div class="stat-label">Avalia√ß√£o</div>
                </div>
            </div>
            
            <div class="profile-section-title">Minhas Pe√ßas</div>
            <div id="my-parts-container" class="my-parts-list">
                <!-- Pe√ßas do usu√°rio ser√£o carregadas aqui -->
            </div>
        </div>
        
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showScreen('home', this)">
                <i class="fas fa-home nav-icon"></i>
                <div class="nav-label">In√≠cio</div>
            </div>
            <div class="nav-item" onclick="showScreen('sell', this)">
                <i class="fas fa-plus-circle nav-icon"></i>
                <div class="nav-label">Vender</div>
            </div>
            <div class="nav-item" onclick="showScreen('chat', this)">
                <i class="fas fa-comments nav-icon"></i>
                <div class="nav-label">Conversas</div>
            </div>
            <div class="nav-item" onclick="showScreen('profile', this)">
                <i class="fas fa-user nav-icon"></i>
                <div class="nav-label">Perfil</div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast"></div>

        <!-- Modal de Instru√ß√µes -->
        <div id="instructions-modal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <h2>Bem-vindo ao ClassicParts!</h2>
                <p>Este √© um prot√≥tipo para testes. Aqui est√° como voc√™ pode testar:</p>
                <ul>
                    <li><strong>In√≠cio:</strong> Veja pe√ßas dispon√≠veis e clique para conversar</li>
                    <li><strong>Vender:</strong> Cadastre novas pe√ßas para venda</li>
                    <li><strong>Chat:</strong> Interaja com vendedores sobre as pe√ßas</li>
                    <li><strong>Perfil:</strong> Visualize suas informa√ß√µes e an√∫ncios</li>
                </ul>
                <button class="reset-btn" onclick="resetApp()">Resetar Dados</button>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let parts = JSON.parse(sessionStorage.getItem('parts')) || [
            {
                id: 1,
                title: 'Carburador Fusca 1300',
                brand: 'Volkswagen',
                model: 'Fusca',
                year: '1970-1975',
                price: 280,
                location: 'S√£o Jos√©, SC',
                description: 'Carburador original, funcionando perfeitamente',
                seller: 'Jo√£o Silva',
                sellerId: 2,
                image: 'üì∑ Carburador Fusca 1300'
            },
            {
                id: 2,
                title: 'Volante Chevette Original',
                brand: 'Chevrolet',
                model: 'Chevette',
                year: '1980-1985',
                price: 350,
                location: 'Florian√≥polis, SC',
                description: 'Volante em √≥timo estado, sem desgastes',
                seller: 'Maria Oliveira',
                sellerId: 3,
                image: 'üì∑ Volante Chevette'
            },
            {
                id: 3,
                title: 'Radiador Opala 6 cilindros',
                brand: 'Chevrolet',
                model: 'Opala',
                year: '1978-1985',
                price: 420,
                location: 'Joinville, SC',
                description: 'Radiador em √≥timo estado, sem vazamentos',
                seller: 'Carlos Souza',
                sellerId: 4,
                image: 'üì∑ Radiador Opala'
            },
            {
                id: 4,
                title: 'Banco Dianteiro Fusca',
                brand: 'Volkswagen',
                model: 'Fusca',
                year: '1965-1979',
                price: 600,
                location: 'Blumenau, SC',
                description: 'Banco original, estofamento renovado',
                seller: 'Ana Santos',
                sellerId: 5,
                image: 'üì∑ Banco Fusca'
            },
            {
                id: 5,
                title: 'Lanterna Traseira Bras√≠lia',
                brand: 'Volkswagen',
                model: 'Bras√≠lia',
                year: '1973-1980',
                price: 180,
                location: 'Itaja√≠, SC',
                description: 'Lanterna original, sem trincas',
                seller: 'Pedro Costa',
                sellerId: 6,
                image: 'üì∑ Lanterna Bras√≠lia'
            }
        ];
        
        let messages = JSON.parse(sessionStorage.getItem('messages')) || {};
        let currentChatPart = null;
        let currentUser = {
            id: 1,
            name: 'Voc√™',
            location: 'S√£o Jos√©, SC',
            rating: 4.8
        };
        
        function saveData() {
            sessionStorage.setItem('parts', JSON.stringify(parts));
            sessionStorage.setItem('messages', JSON.stringify(messages));
        }
        
        function showScreen(screenName, el = null) {
            // Hide all screens
            document.querySelectorAll('.content, .chat-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Remove active from nav buttons
            document.querySelectorAll('.nav-btn, .nav-item').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected screen
            if (screenName === 'home') {
                document.getElementById('home-screen').classList.add('active');
                loadParts();
            } else if (screenName === 'sell') {
                document.getElementById('sell-screen').classList.add('active');
            } else if (screenName === 'chat') {
                document.getElementById('chat-screen').classList.add('active');
                loadChat();
            } else if (screenName === 'profile') {
                document.getElementById('profile-screen').classList.add('active');
                loadProfile();
            }
            
            // Add active to clicked nav
            if (el) {
                el.classList.add('active');
            }
        }
        
        function loadParts(searchTerm = '') {
            const container = document.getElementById('parts-container');
            const filteredParts = parts.filter(part => 
                searchTerm === '' || 
                part.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                part.brand.toLowerCase().includes(searchTerm.toLowerCase()) ||
                part.model.toLowerCase().includes(searchTerm.toLowerCase())
            );
            
            container.innerHTML = filteredParts.map(part => `
                <div class="card" onclick="openChat(${part.id})">
                    <div class="card-image">${part.image}</div>
                    <div class="card-content">
                        <div class="card-title">${part.title}</div>
                        <div class="card-subtitle">${part.brand} ${part.model} ‚Ä¢ ${part.year}</div>
                        <div class="card-price">R$ ${part.price.toFixed(2)}</div>
                        <div class="card-location">üìç ${part.location}</div>
                    </div>
                </div>
            `).join('');
        }
        
        function openChat(partId) {
            currentChatPart = parts.find(p => p.id === partId);
            if (currentChatPart) {
                document.querySelector('.chat-header').innerHTML = `
                    <strong>üí¨ ${currentChatPart.seller}</strong><br>
                    <small>${currentChatPart.title}</small>
                `;
                
                // Inicializa conversa se n√£o existir
                if (!messages[partId]) {
                    messages[partId] = [
                        { sender: 'other', text: 'Oi! Esse item est√° dispon√≠vel?' },
                        { sender: 'me', text: 'Oi! Sim, est√° dispon√≠vel. Quer mais detalhes?' }
                    ];
                    saveData();
                }
                
                showScreen('chat');
            }
        }
        
        function loadChat() {
            if (!currentChatPart) return;
            
            const chatId = currentChatPart.id;
            const chatMessages = messages[chatId] || [];
            
            const messagesContainer = document.querySelector('.chat-messages');
            messagesContainer.innerHTML = chatMessages.map(msg => `
                <div class="message ${msg.sender === 'me' ? 'sent' : 'received'}">
                    <div class="message-bubble">${msg.text}</div>
                </div>
            `).join('');
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function sendMessage() {
            if (!currentChatPart) return;
            
            const input = document.getElementById('chat-input-field');
            const text = input.value.trim();
            
            if (text) {
                const chatId = currentChatPart.id;
                if (!messages[chatId]) {
                    messages[chatId] = [];
                }
                
                messages[chatId].push({ sender: 'me', text: text });
                
                // Resposta autom√°tica
                setTimeout(() => {
                    const responses = [
                        "Interessante! Posso te ajudar em mais alguma coisa?",
                        "√ìtima pergunta! Sim, est√° dispon√≠vel para retirada imediata.",
                        "Vou verificar e te respondo em breve.",
                        "Posso te enviar mais fotos se quiser.",
                        "Qual seu hor√°rio preferido para ver a pe√ßa?"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    messages[chatId].push({ sender: 'other', text: randomResponse });
                    saveData();
                    loadChat();
                }, 1000);
                
                input.value = '';
                saveData();
                loadChat();
            }
        }
        
        function addPart() {
            const form = document.getElementById('sell-form');
            const formData = new FormData(form);
            
            if (!formData.get('title') || !formData.get('brand') || !formData.get('model') || !formData.get('price')) {
                showToast('‚ùå Preencha todos os campos obrigat√≥rios');
                return;
            }
            
            const newPart = {
                id: Date.now(),
                title: formData.get('title'),
                brand: formData.get('brand'),
                model: formData.get('model'),
                year: formData.get('year'),
                price: parseFloat(formData.get('price')),
                location: 'S√£o Jos√©, SC',
                description: formData.get('description'),
                seller: 'Voc√™',
                sellerId: currentUser.id,
                image: 'üì∑ ' + formData.get('title')
            };
            
            parts.unshift(newPart);
            saveData();
            form.reset();
            document.getElementById('preview-container').innerHTML = '';
            showToast('‚úÖ Pe√ßa publicada com sucesso!');
            showScreen('home');
        }
        
        function loadProfile() {
            const myParts = parts.filter(part => part.sellerId === currentUser.id);
            const container = document.getElementById('my-parts-container');
            
            container.innerHTML = myParts.map(part => `
                <div class="my-part-item">
                    <div class="my-part-image">${part.image}</div>
                    <div class="my-part-info">
                        <div class="my-part-title">${part.title}</div>
                        <div class="my-part-subtitle">${part.brand} ${part.model} ‚Ä¢ ${part.year}</div>
                        <div class="my-part-price">R$ ${part.price.toFixed(2)}</div>
                        <div class="my-part-actions">
                            <button class="action-btn edit-btn" onclick="editPart(${part.id})">Editar</button>
                            <button class="action-btn delete-btn" onclick="deletePart(${part.id})">Excluir</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function editPart(partId) {
            const part = parts.find(p => p.id === partId);
            if (!part) return;
            
            // Preenche o formul√°rio com os dados da pe√ßa
            const form = document.getElementById('sell-form');
            form.elements['title'].value = part.title;
            form.elements['brand'].value = part.brand;
            form.elements['model'].value = part.model;
            form.elements['year'].value = part.year;
            form.elements['price'].value = part.price;
            form.elements['description'].value = part.description || '';
            
            // Mostra a tela de venda
            showScreen('sell');
            
            // Atualiza o comportamento do formul√°rio para edi√ß√£o
            form.onsubmit = function(e) {
                e.preventDefault();
                updatePart(partId);
            };
            
            showToast('Edite os dados da pe√ßa e clique em "Publicar An√∫ncio" para salvar');
        }
        
        function updatePart(partId) {
            const form = document.getElementById('sell-form');
            const formData = new FormData(form);
            
            if (!formData.get('title') || !formData.get('brand') || !formData.get('model') || !formData.get('price')) {
                showToast('‚ùå Preencha todos os campos obrigat√≥rios');
                return;
            }
            
            const partIndex = parts.findIndex(p => p.id === partId);
            if (partIndex === -1) return;
            
            parts[partIndex] = {
                ...parts[partIndex],
                title: formData.get('title'),
                brand: formData.get('brand'),
                model: formData.get('model'),
                year: formData.get('year'),
                price: parseFloat(formData.get('price')),
                description: formData.get('description'),
                image: 'üì∑ ' + formData.get('title')
            };
            
            saveData();
            form.reset();
            document.getElementById('preview-container').innerHTML = '';
            showToast('‚úÖ Pe√ßa atualizada com sucesso!');
            
            // Restaura o comportamento padr√£o do formul√°rio
            form.onsubmit = function(e) {
                e.preventDefault();
                addPart();
            };
            
            showScreen('profile');
        }
        
        function deletePart(partId) {
            if (confirm('Tem certeza que deseja excluir este an√∫ncio?')) {
                parts = parts.filter(p => p.id !== partId);
                saveData();
                loadProfile();
                showToast('‚úÖ An√∫ncio exclu√≠do com sucesso!');
            }
        }
        
        function searchParts() {
            const searchTerm = document.querySelector('.search-bar').value;
            loadParts(searchTerm);
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.opacity = 1;
            
            setTimeout(() => {
                toast.style.opacity = 0;
            }, 3000);
        }
        
        // Upload e preview de imagens
        document.getElementById('part-images').addEventListener('change', function(e) {
            const previewContainer = document.getElementById('preview-container');
            previewContainer.innerHTML = '';
            
            const files = e.target.files;
            for (let i = 0; i < Math.min(files.length, 3); i++) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = document.createElement('img');
                    img.src = event.target.result;
                    img.style.width = '80px';
                    img.style.height = '80px';
                    img.style.objectFit = 'cover';
                    img.style.borderRadius = '8px';
                    previewContainer.appendChild(img);
                };
                reader.readAsDataURL(files[i]);
            }
        });
        
        function openModal() {
            document.getElementById('instructions-modal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('instructions-modal').style.display = 'none';
        }
        
        function resetApp() {
            sessionStorage.clear();
            parts = [
                {
                    id: 1,
                    title: 'Carburador Fusca 1300',
                    brand: 'Volkswagen',
                    model: 'Fusca',
                    year: '1970-1975',
                    price: 280,
                    location: 'S√£o Jos√©, SC',
                    description: 'Carburador original, funcionando perfeitamente',
                    seller: 'Jo√£o Silva',
                    sellerId: 2,
                    image: 'üì∑ Carburador Fusca 1300'
                },
                {
                    id: 2,
                    title: 'Volante Chevette Original',
                    brand: 'Chevrolet',
                    model: 'Chevette',
                    year: '1980-1985',
                    price: 350,
                    location: 'Florian√≥polis, SC',
                    description: 'Volante em √≥timo estado, sem desgastes',
                    seller: 'Maria Oliveira',
                    sellerId: 3,
                    image: 'üì∑ Volante Chevette'
                },
                {
                    id: 3,
                    title: 'Radiador Opala 6 cilindros',
                    brand: 'Chevrolet',
                    model: 'Opala',
                    year: '1978-1985',
                    price: 420,
                    location: 'Joinville, SC',
                    description: 'Radiador em √≥timo estado, sem vazamentos',
                    seller: 'Carlos Souza',
                    sellerId: 4,
                    image: 'üì∑ Radiador Opala'
                },
                {
                    id: 4,
                    title: 'Banco Dianteiro Fusca',
                    brand: 'Volkswagen',
                    model: 'Fusca',
                    year: '1965-1979',
                    price: 600,
                    location: 'Blumenau, SC',
                    description: 'Banco original, estofamento renovado',
                    seller: 'Ana Santos',
                    sellerId: 5,
                    image: 'üì∑ Banco Fusca'
                },
                {
                    id: 5,
                    title: 'Lanterna Traseira Bras√≠lia',
                    brand: 'Volkswagen',
                    model: 'Bras√≠lia',
                    year: '1973-1980',
                    price: 180,
                    location: 'Itaja√≠, SC',
                    description: 'Lanterna original, sem trincas',
                    seller: 'Pedro Costa',
                    sellerId: 6,
                    image: 'üì∑ Lanterna Bras√≠lia'
                }
            ];
            messages = {};
            saveData();
            loadParts();
            closeModal();
            showToast('‚úÖ Aplicativo resetado com sucesso!');
}

        </script>
</body>
</html>